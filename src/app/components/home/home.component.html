<div *ngIf="auth.usuario | async; then autenticado "></div>

<ng-template #autenticado>
    <div *ngIf="auth.usuario | async as Usuario">
        <div class="fondoPrincipal">
            <!-- GRID -->
            <!-- NavBar -->
            <nav class="navbar navbar-expand-lg navbar-light  fixed-top" style="background-image: url(https://firebasestorage.googleapis.com/v0/b/umakeit-bsu-p1.appspot.com/o/b97834c5ba1fb532b5ee61136914fd16.jpg?alt=media&token=8b7fac5b-689f-4506-bfcd-c5ea555cb1ff)">

                <button class="btn-secondary" routerLink="/home" style="border-radius:8px"><img  style="border-radius: 10px;height: 60px;" src="https://firebasestorage.googleapis.com/v0/b/umakeit-bsu-p1.appspot.com/o/logoImg.jpg?alt=media&token=c911f269-e5c9-4229-a2ff-0eb0394872e9" ></button>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                              {{Usuario.name}}
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" (click)="IrAlCarrito(Usuario.uid)">Mi carrito</a>
                                <a class="dropdown-item" routerLink="/pago" routerLinkActive="active">Checkout</a>
                                <a class="dropdown-item" routerLink="/orden" routerLinkActive="active">Orden</a>
                                <a class="dropdown-item" routerLink="/cambiarClave" routerLinkActive="active">Cambiar Clave</a>
                                <hr class="m-1">
                                <a class="dropdown-item" routerLink="/login" routerLinkActive="active">Cerrar Sesión</a>
                            </div>
                        </li>
                    </ul>
                </div>

            </nav>

            <!-- Fin NavBar -->

            <!-- Inicio row -->
            <div class="row mt-5"></div>
            <!-- Fin row -->

            <!-- Inicio row -->
            <div class="row mt-5 mb-3 justify-content-center">
                <h2 style="font-family: 'Lobster', cursive; font-size: 54px">Entradas</h2>
            </div>
            <!-- Fin row -->

            <!-- Inicio row -->
            <div class="row m-3">

                <!-- Card Entrada -->
                <div *ngFor="let entrada of entradas">
                    <div *ngIf="entrada.disponible == true">
                    <div class="card  m-1" style="width: 20rem; border-radius: 20px">
                        <img class="card-img-top" src="{{entrada.photoUrl}}" alt="Card image cap" style="width: 318px;
            height: 290px;">
                        <div class="card-body">
                            <h5 class="card-title" style="text-align: center; font-weight: bold">{{entrada.nombre}}</h5>
                        </div>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">Precio: {{entrada.precio}}</li>
                            <li class="list-group-item">Descripción: {{entrada.descripcion}}</li>
                           <!-- <li class="list-group-item">Disponibilidad: {{entrada.disponible}}</li> -->
                        </ul>
                        <div class="card-body">
                            <button type="button" class="btn btn-secondary" (click)="openModal(template, entrada)">Comprar</button>
                        </div>
                    </div>
                </div>
                <!-- Fin Card -->
            </div>
            </div>
            <!-- Fin row -->

            <!-- Inicio row -->
            <div class="row m-3 justify-content-center">
                <h2 style="font-family: 'Lobster', cursive; font-size: 54px">Principales</h2>
            </div>
            <!-- Fin row -->

            <!-- Inicio row -->
            <div class="row m-3">
                <!-- Card Principal -->
                <div *ngFor="let principal of principales">
                        <div *ngIf="principal.disponible == true">
                    <div class="card  m-1" style="width: 20rem; border-radius: 20px">
                        <img class="card-img-top" style="width: 318px;
              height: 290px;" src="{{principal.photoUrl}}" alt="Card image cap">
                        <div class="card-body">
                            <h5 class="card-title" style="text-align: center; font-weight: bold">{{principal.nombre}}</h5>
                        </div>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">Precio: {{principal.precio}}</li>
                            <li class="list-group-item">Descripción: {{principal.descripcion}}</li>
                            <li class="list-group-item">Disponibilidad: {{principal.disponible}}</li>

                        </ul>
                        <div class="card-body">
                            <button type="button" class="btn btn-secondary" (click)="openModal(template, principal)">Comprar</button>
                        </div>
                    </div>
                </div>
            </div>
            </div>
                <!-- Fin Card -->

            </div>
            <!-- Fin row -->

            <!-- Inicio row -->
            <div class="row m-3 justify-content-center">
                <h2 style="font-family: 'Lobster', cursive; font-size: 54px">Postres</h2>
            </div>
            <!-- Fin row -->

            <!-- Inicio row -->
            <div class="row m-3">
                <!-- Card Postre -->
                <div *ngFor="let postre of postres">
                        <div *ngIf="postre.disponible == true">
                    <div class="card  m-1" style="width: 20rem;border-radius: 20px">
                        <img class="card-img-top" style="width: 318px;
              height: 290px;" src="{{postre.photoUrl}}" alt="Card image cap">
                        <div class="card-body">
                            <h5 class="card-title" style="text-align: center; font-weight: bold">{{postre.nombre}}</h5>
                        </div>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">Precio: {{postre.precio}}</li>
                            <li class="list-group-item">Descripción: {{postre.descripcion}}</li>
                            <li class="list-group-item">Disponibilidad: {{postre.disponible}}</li>

                        </ul>
                        <div class="card-body">
                            <button type="button" class="btn btn-secondary" (click)="openModal(template, postre)">Comprar</button>
                        </div>
            
                </div>
            </div>
                <!-- Fin Card -->
            </div>
            <!-- Fin row -->

            <!-- Fin GRID -->
        </div>
        <!-- Fin autenticacion -->
    </div>
</ng-template>



<ng-template #template>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Añadir a Carrito</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="decline()">
      <span aria-hidden="true">&times;</span>
    </button>
    </div>
    <div class="modal-body">
        <form>
            <div class="form-row">
                <div class="form-group col-2">
                    <label for="inputPrecio">Cantidad:</label>
                </div>
                <div class="form-group col-10">
                    <input #cantidad type="number" class="form-control" name="inputCantidad" placeholder="Cantidad">
                </div>
            </div>
            <div *ngFor="let extra of productoCarrito.extras; let i = index" class="form-row">
                <div class="form-check">
                    <input #cambioExtra class="form-check-input" type="checkbox" (change)="CambioExtra(extra, i)" value="" id="defaultCheck1">
                    <label class="form-check-label" for="defaultCheck1">
                  {{extra.nombreExtra}}
                </label>
                </div>
            </div>
            <div class="form-row">
                <p>Precio: {{productoCarrito.precio}}</p>
            </div>
            <div class="form-row justify-content-center">

                <button class="btn btn-secondary m-1" (click)="confirm(cantidad)">Agregar</button>
                <button class="btn btn-secondary m-1" (click)="decline()">Regresar</button>

            </div>
        </form>
    </div>
</ng-template>